<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Selection</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Military Unit Selection</h1>

    <form id="unitForm">
        
        <!-- User Input -->
        <label for="discord">Discord Name:</label>
        <input type="text" id="discord" name="discord" placeholder="Your Discord Name" required>

        <label for="username">In-Game Username:</label>
        <input type="text" id="username" name="username" placeholder="Your Game Name" required>

        <!-- Unit Selection -->
        <div class="unit-container">
            <img src="https://github.com/CONWORLDSOFFICIAL/CON-WORLDS-Unit-Selection/blob/main/sasf.png" alt="SASF">
            <label>Stealth Air Superiority Fighter (SASF)</label>
            <input type="range" id="sasf" min="0" max="25" value="0" oninput="updateResources()">
            <span id="sasfValue">0</span>
        </div>

        <div class="unit-container">
            <img src="https://github.com/CONWORLDSOFFICIAL/CON-WORLDS-Unit-Selection/blob/main/mrl.png" alt="MRL">
            <label>Multiple Rocket Launcher (MRL)</label>
            <input type="range" id="mrl" min="0" max="25" value="0" oninput="updateResources()">
            <span id="mrlValue">0</span>
        </div>

        <div class="unit-container">
            <img src="https://github.com/CONWORLDSOFFICIAL/CON-WORLDS-Unit-Selection/blob/main/tds.png" alt="TDS">
            <label>Theater Defense System (TDS)</label>
            <input type="range" id="tds" min="0" max="25" value="0" oninput="updateResources()">
            <span id="tdsValue">0</span>
        </div>

        <div class="unit-container">
            <img src="https://github.com/CONWORLDSOFFICIAL/CON-WORLDS-Unit-Selection/blob/main/ah.png" alt="AH">
            <label>Attack Helicopter (AH)</label>
            <input type="range" id="ah" min="0" max="25" value="0" oninput="updateResources()">
            <span id="ahValue">0</span>
        </div>

        <!-- Live Resource Tracker -->
        <h2>Resource Usage</h2>
        <table>
            <tr><th>Resource</th><th>Used</th><th>Limit</th></tr>
            <tr><td>Electronics</td><td id="usedElectronics">0</td><td>40000</td></tr>
            <tr><td>Supplies</td><td id="usedSupplies">0</td><td>40000</td></tr>
            <tr><td>Components</td><td id="usedComponents">0</td><td>40000</td></tr>
        </table>

        <br>
        <button type="submit">Submit</button>
    </form>

    <p id="warning" class="warning"></p>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyArxYCguc3tHkx_R25E1l8aPffnDZjgodE",
          authDomain: "con-worlds-unit-selection.firebaseapp.com",
          projectId: "con-worlds-unit-selection",
          storageBucket: "con-worlds-unit-selection.firebasestorage.app",
          messagingSenderId: "1056963708496",
          appId: "1:1056963708496:web:09c7e564bc2d06ed4ef355",
          measurementId: "G-P7TXFN0PDQ"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Function to update live resource tracking
        function updateResources() {
            const unitCosts = {
                sasf: { electronics: 1600, components: 1500, supplies: 0 },
                mrl: { electronics: 800, components: 0, supplies: 1500 },
                tds: { electronics: 900, components: 0, supplies: 1500 },
                ah: { electronics: 750, components: 900, supplies: 0 }
            };

            const sasf = parseInt(document.getElementById("sasf").value);
            const mrl = parseInt(document.getElementById("mrl").value);
            const tds = parseInt(document.getElementById("tds").value);
            const ah = parseInt(document.getElementById("ah").value);

            document.getElementById("sasfValue").innerText = sasf;
            document.getElementById("mrlValue").innerText = mrl;
            document.getElementById("tdsValue").innerText = tds;
            document.getElementById("ahValue").innerText = ah;

            document.getElementById("usedElectronics").innerText =
                sasf * unitCosts.sasf.electronics +
                mrl * unitCosts.mrl.electronics +
                tds * unitCosts.tds.electronics +
                ah * unitCosts.ah.electronics;

            document.getElementById("usedSupplies").innerText =
                sasf * unitCosts.sasf.supplies +
                mrl * unitCosts.mrl.supplies +
                tds * unitCosts.tds.supplies +
                ah * unitCosts.ah.supplies;

            document.getElementById("usedComponents").innerText =
                sasf * unitCosts.sasf.components +
                mrl * unitCosts.mrl.components +
                tds * unitCosts.tds.components +
                ah * unitCosts.ah.components;
        }

        document.getElementById("unitForm").addEventListener("submit", async function(event) {
            event.preventDefault();
            await addDoc(collection(db, "submissions"), {
                discord: document.getElementById("discord").value,
                username: document.getElementById("username").value,
                sasf: parseInt(document.getElementById("sasf").value),
                mrl: parseInt(document.getElementById("mrl").value),
                tds: parseInt(document.getElementById("tds").value),
                ah: parseInt(document.getElementById("ah").value),
                timestamp: serverTimestamp()
            });
            document.getElementById("warning").innerText = "Submission successful!";
        });

    </script>

</body>
</html>

